<!DOCTYPE html>
<html lang="ko">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>WI:SH KIOSK & SERVER</title>
        <link rel="icon" href="/img/logo.png" />
        <meta
            name="description"
            content="WISH Kiosk & WISH Server — 접근성 키오스크와 연동 서버 소개/가이드"
        />
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=JetBrains+Mono:wght@400;600&display=swap"
            rel="stylesheet"
        />
        <link rel="stylesheet" href="styles.css" />
        <script
            src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"
            defer
        ></script>
    </head>
    <body>
        <header>
            <div class="container">
                <nav>
                    <div style="display: flex; align-items: center; gap: 10px">
                        <div class="pill">WI:SH</div>
                        <span class="small">Kiosk & Server</span>
                    </div>
                    <div style="display: flex; align-items: center; gap: 20px">
                        <!-- Kiosk-only nav -->
                        <div class="nav-links kiosk-only">
                            <a href="#overview">소개</a>
                            <a href="#features">특징</a>
                            <a href="#install">설치</a>
                            <a href="#usage">사용</a>
                        </div>
                        <!-- Server-only nav -->
                        <div class="nav-links server-only hidden">
                            <a href="#server-overview">서버 소개</a>
                            <a href="#server-features">서버 특징</a>
                            <a href="#server-install">서버 설치</a>
                            <a href="#server-api">API</a>
                            <a href="#server-usage">서버 사용</a>
                        </div>
                    </div>
                </nav>
            </div>
        </header>

        <!-- TOP-LEVEL TABS -->
        <div class="container">
            <div
                class="top-tabs"
                role="tablist"
                aria-label="WI:SH Product Switch"
            >
                <button
                    class="active"
                    data-pane="kiosk"
                    aria-controls="pane-kiosk"
                    aria-selected="true"
                >
                    Kiosk
                </button>
                <button
                    data-pane="server"
                    aria-controls="pane-server"
                    aria-selected="false"
                >
                    Server
                </button>
            </div>
        </div>

        <!-- ===================== KIOSK PANE ===================== -->
        <div
            id="pane-kiosk"
            class="pane active"
            role="tabpanel"
            aria-labelledby="tab-kiosk"
        >
            <!-- KIOSK: OVERVIEW -->
            <section class="hero" id="overview">
                <div class="container">
                    <span class="badge">WI:SH Kiosk</span>
                    <h1 class="h1">WI:SH Kiosk</h1>
                    <h2 class="h2">
                        Write It: Scan & Handle — 키오스크 접근성 개선 프로젝트
                    </h2>
                    <p class="lead">
                        종이에 쓴 숫자를 스캔/인식해 주문을 넣는 키오스크입니다.
                        스캐너(WIA), 바코드/QR(ZXing·QRCoder), ONNX
                        런타임(모델은 PyTorch로 학습)으로 노년층도 쉽게 주문할
                        수 있도록 설계했습니다.
                    </p>
                    <div class="cta-row">
                        <a
                            class="btn primary"
                            href="https://github.com/Team-ToyoTech/WISH-Kiosk"
                            target="_blank"
                            rel="noopener"
                            >GitHub 저장소</a
                        >
                        <a class="btn secondary" href="#install">빠른 시작</a>
                    </div>

                    <div class="grid features">
                        <div class="card">
                            <h3 class="h3">핵심 목표</h3>
                            <ul>
                                <li>손글씨 기반 주문 입력과 접근성 강화</li>
                                <li>스캔→인식→처리 전체 흐름 자동화</li>
                                <li>현장 배치에 필요한 운영 구성 제공</li>
                            </ul>
                        </div>
                        <div class="card">
                            <h3 class="h3">기술 스택</h3>
                            <div class="tag">C# (.NET 8.0-windows)</div>
                            <div class="tag">WIA (스캐너)</div>
                            <div class="tag">ZXing</div>
                            <div class="tag">QRCoder</div>
                            <div class="tag">PyTorch → ONNX</div>
                        </div>
                        <div class="card">
                            <h3 class="h3">저장소 구조 하이라이트</h3>
                            <ul class="mono">
                                <li>KioskAI — 프린트·스캔·인식</li>
                                <li>wishKioskDID / DIDReceive — 표출/수신</li>
                                <li>trainModel.py — 모델 학습 스크립트</li>
                                <li>copy_these_files — 실행 전 복사 파일</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <!-- KIOSK: FEATURES + ARCH -->
            <section id="features" class="alt">
                <div class="container two-col">
                    <div>
                        <h2 class="h2">주요 기능</h2>
                        <ul>
                            <li>
                                스캐너(WIA)로 입력된 용지 자동 감지 및 전처리
                            </li>
                            <li>ZXing으로 바코드/QR 인식, QRCoder로 QR 생성</li>
                            <li>
                                ONNX 런타임 기반 손글씨 분류/인식 (PyTorch 학습)
                            </li>
                            <li>DID 수신/표출 보조 모듈 연동</li>
                        </ul>
                    </div>
                    <div>
                        <h2 class="h2">동작 흐름</h2>
                        <div class="card">
                            <ol class="small" style="margin: 0">
                                <li>사용자 필기 → 스캐너(WIA) 이미지 획득</li>
                                <li>이미지 전처리 → 바코드/QR 인식</li>
                                <li>ONNX 모델 추론으로 숫자 판별</li>
                                <li>주문 처리 및 DID 연동</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </section>

            <!-- KIOSK: INSTALL -->
            <section id="install">
                <div class="container">
                    <h2 class="h2">설치 및 준비</h2>
                    <div class="grid">
                        <div class="card">
                            <h3 class="h3">사전 요구사항</h3>
                            <ul>
                                <li>Windows 10/11, Visual Studio 2022</li>
                                <li>
                                    .NET SDK 타깃:
                                    <span class="mono">net8.0-windows</span>
                                </li>
                                <li>WIA 호환 스캐너 드라이버</li>
                            </ul>
                        </div>
                        <div class="card">
                            <h3 class="h3">다운로드</h3>
                            <p class="small">Git 사용 또는 ZIP 다운로드</p>
                            <pre><code class="mono">git clone https://github.com/Team-ToyoTech/WISH-Kiosk.git
cd WISH-Kiosk
</code></pre>
                        </div>
                    </div>

                    <div class="card" style="margin-top: 18px">
                        <h3 class="h3">Visual Studio에서 열기</h3>
                        <ol>
                            <li>
                                <span class="mono">wishKiosk.sln</span> 열기 →
                                NuGet 복원
                            </li>
                            <li>
                                솔루션 빌드 (<span class="kbd">Ctrl</span>+<span
                                    class="kbd"
                                    >Shift</span
                                >+<span class="kbd">B</span>)
                            </li>
                        </ol>
                    </div>

                    <div class="card" style="margin-top: 18px">
                        <h3 class="h3">실행 전 파일 복사</h3>
                        <p class="small">
                            저장소
                            <span class="mono">copy_these_files</span> 내용을
                            실행 폴더로 복사
                        </p>
                        <ul class="mono">
                            <li>
                                onnx_model 폴더 →
                                KioskAI\bin\Debug\net8.0-windows\
                            </li>
                            <li>
                                sound.wav 파일 →
                                wishKioskDIDReceive\bin\Debug\net8.0-windows\
                            </li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- KIOSK: USAGE -->
            <section id="usage" class="alt">
                <div class="container">
                    <h2 class="h2">사용 방법</h2>
                    <div class="tabs" role="tablist">
                        <button class="active" data-tab="run">실행</button>
                        <button data-tab="flow">흐름</button>
                        <button data-tab="troubleshoot">문제 해결</button>
                    </div>
                    <div id="tab-run" class="tabpanel active">
                        <ol>
                            <li>
                                <span class="mono">KioskAI</span>,
                                <span class="mono">wishKioskDIDReceive</span>
                                실행
                            </li>
                            <li>스캐너가 WIA로 정상 인식되는지 확인</li>
                            <li>스캔 → 인식 결과 확인</li>
                        </ol>
                    </div>
                    <div id="tab-flow" class="tabpanel">
                        <ol>
                            <li>스캔 버튼 → 문서 스캔</li>
                            <li>바코드/QR 감지 → 주문 식별</li>
                            <li>모델 추론 → 숫자 인식</li>
                            <li>주문 처리 → DID 수신/알림</li>
                        </ol>
                    </div>
                    <div id="tab-troubleshoot" class="tabpanel">
                        <ul>
                            <li>
                                스캐너 인식 실패: WIA 드라이버/USB 포트 확인
                            </li>
                            <li>패키지 오류: NuGet 복원/재설치</li>
                            <li>
                                모델 로드 실패:
                                <span class="mono">onnx_model</span> 경로 재확인
                            </li>
                        </ul>
                    </div>
                </div>
            </section>

            <!-- DEMO -->
            <section id="demo">
                <div class="container two-col">
                    <div>
                        <h2 class="h2">시연</h2>
                        <div
                            class="card"
                            style="
                                aspect-ratio: 16/9;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                            "
                        >
                            <span class="muted">YouTube 또는 MP4 삽입</span>
                        </div>
                    </div>
                    <div>
                        <h2 class="h2">스크린샷</h2>
                        <div
                            class="grid"
                            style="grid-template-columns: repeat(2, 1fr)"
                        >
                            <div class="card" style="aspect-ratio: 4/3"></div>
                            <div class="card" style="aspect-ratio: 4/3"></div>
                            <div class="card" style="aspect-ratio: 4/3"></div>
                            <div class="card" style="aspect-ratio: 4/3"></div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
        <!-- ===================== /KIOSK PANE ===================== -->

        <!-- ===================== SERVER PANE ===================== -->
        <div
            id="pane-server"
            class="pane"
            role="tabpanel"
            aria-labelledby="tab-server"
        >
            <!-- SERVER: OVERVIEW -->
            <section class="hero" id="server-overview">
                <div class="container">
                    <span class="badge">WI:SH Server</span>
                    <h2 class="h1">WI:SH Server</h2>
                    <p class="lead">
                        WI:SH Kiosk와 연동되는 서버 구성입니다. 주문 접수/상태
                        관리, 외부 결제 연동, 큐 표출 등 백엔드 역할을
                        담당합니다. (Toss Payments 기반 결제)
                    </p>
                    <div class="cta-row">
                        <a
                            class="btn primary"
                            href="https://github.com/Team-ToyoTech/WISH-Server"
                            target="_blank"
                            rel="noopener"
                            >GitHub 저장소</a
                        >
                        <a class="btn secondary" href="#server-install"
                            >서버 빠른 시작</a
                        >
                    </div>
                </div>
            </section>

            <!-- SERVER: FEATURES -->
            <section id="server-features" class="alt">
                <div class="container two-col">
                    <div>
                        <h2 class="h2">서버 주요 기능</h2>
                        <ul>
                            <li>키오스크 ↔ 서버 주문/결제 플로우</li>
                            <li>주문 대기/완료 큐 관리 및 조회</li>
                            <li>
                                Toss Payments 결제 승인/브랜드페이/빌링 샘플
                                엔드포인트
                            </li>
                        </ul>
                        <div class="note small">
                            결제 키는 실제 상용/테스트 키로 교체해야 합니다.
                        </div>
                    </div>
                    <div>
                        <h2 class="h2">연동 개요</h2>
                        <div class="card small">
                            <ol style="margin: 0">
                                <li>
                                    키오스크 → <span class="mono">/pay</span> 로
                                    결제 세션 생성
                                </li>
                                <li>
                                    브라우저(또는 WebView)에서 결제 → 서버에서
                                    승인 처리
                                </li>
                                <li>
                                    결제 완료 시 주문 등록(<span class="mono"
                                        >/order/add/:id</span
                                    >
                                    또는 카운터 결제 플로우)
                                </li>
                            </ol>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SERVER: INSTALL -->
            <section id="server-install">
                <div class="container">
                    <h2 class="h2">서버 설치 및 실행</h2>
                    <div class="grid">
                        <div class="card">
                            <h3 class="h3">다운로드</h3>
                            <pre><code class="mono">git clone https://github.com/Team-ToyoTech/WISH-Server.git
cd WISH-Server
npm install express body-parser
node Server.js
</code></pre>
                            <p class="small">
                                기본 포트 <span class="mono">4000</span>으로
                                기동됩니다.
                            </p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- SERVER: API -->
            <section id="server-api" class="alt">
                <div class="container">
                    <h2 class="h2">API 사용 방법</h2>
                    <p class="small">
                        기본 URL:
                        <span class="mono">http://localhost:4000</span>
                    </p>
                    <p class="small">
                        AWS 서버 URL:
                        <span class="mono">https://wish.toyotech.dev</span>
                    </p>
                    <p class="small">
                        <span class="mono">:id</span>: 랜덤으로 발급 받은 결제
                        번호
                    </p>
                    <p class="small">
                        <span class="mono">orderN</span>: 주문 번호
                    </p>
                    <div class="grid">
                        <div class="card">
                            <h3 class="h3">결제 플로우</h3>
                            <details open>
                                <summary class="mono">
                                    POST /pay — 결제 세션 생성
                                </summary>
                                <pre><code class="mono">req  : { "amount": 12000 }
resp : { "redirectId": "&lt;paymentId&gt;" }</code></pre>
                            </details>
                            <details>
                                <summary class="mono">
                                    GET /checkout/:id — 결제창 페이지 (내부용)
                                </summary>
                                <p class="small">
                                    브라우저에서 Toss 결제 위젯 로드 후
                                    성공/실패로 리다이렉트.
                                </p>
                            </details>
                            <details>
                                <summary class="mono">
                                    GET /ispaying/:id — 결제 상태 폴링
                                </summary>
                                <pre><code class="mono">resp : { "status": "pending" | "paid" | "failed" }</code></pre>
                            </details>
                            <details>
                                <summary class="mono">
                                    POST /order/add/:id — 결제완료 주문 등록
                                </summary>
                                <pre><code class="mono">req  : [ { "Name": "라면", "Count": 2 }, ... ]
resp : { "orderNumber": 123 }</code></pre>
                            </details>
                            <details>
                                <summary class="mono">
                                    POST /pay/counter — 카운터 결제(선주문) 생성
                                </summary>
                                <pre><code class="mono">req  : { "amount": 10000, "orders": [ { "Name":"라면","Count":2 } ] }
resp : { "orderNumber": 101, "orderId": "XXXXX" }</code></pre>
                            </details>
                            <details>
                                <summary class="mono">
                                    GET /pay/complete/:orderN — 카운터 결제 완료
                                    처리
                                </summary>
                                <pre><code class="mono">resp : { "status": "success" | "fail" }</code></pre>
                            </details>
                        </div>

                        <div class="card">
                            <h3 class="h3">주문 큐 / DID</h3>
                            <summary class="mono">
                                GET /order/get — 대기 중 주문 목록
                            </summary>
                            <summary class="mono">
                                GET /order/getid — 대기 중 주문 번호 목록
                            </summary>
                            <summary class="mono">
                                GET /order/complete/set/:orderN — 준비완료 처리
                            </summary>
                            <summary class="mono">
                                GET /order/complete/get — 완료된 주문 목록
                            </summary>
                            <summary class="mono">
                                GET /order/complete/getid — 완료된 주문 번호
                                목록
                            </summary>
                            <summary class="mono">
                                GET /order/complete/cancel/:orderN — 완료 취소
                            </summary>
                            <summary class="mono">
                                DELETE /order/del/:orderN — 수령 처리(완료
                                목록에서 제거)
                            </summary>
                        </div>
                    </div>

                    <div class="card" style="margin-top: 18px">
                        <h3 class="h3">cURL 예시</h3>
                        <pre><code class="mono"># 세션 생성 → redirectId 확인
curl -X POST http://localhost:4000/pay \
  -H "Content-Type: application/json" \
  -d '{ "amount": 12000 }'

# 결제 상태 폴링
curl http://localhost:4000/ispaying/&lt;redirectId&gt;

# 결제완료 후 주문 등록
curl -X POST http://localhost:4000/order/add/&lt;redirectId&gt; \
  -H "Content-Type: application/json" \
  -d '[{ "Name": "라면", "Count": 2 }]'</code></pre>
                    </div>
                </div>
            </section>

            <!-- SERVER: USAGE -->
            <section id="server-usage">
                <div class="container">
                    <h2 class="h2">서버 사용 팁</h2>
                    <div class="tabs" role="tablist">
                        <button class="active" data-tab="srv-run">실행</button>
                        <button data-tab="srv-flow">흐름</button>
                        <button data-tab="srv-troubleshoot">문제 해결</button>
                    </div>
                    <div id="tab-srv-run" class="tabpanel active">
                        <ol>
                            <li>
                                로컬에서 서버 기동 후
                                <span class="mono">http://localhost:4000</span>
                                확인
                            </li>
                            <li>키오스크 클라이언트에 서버 URL 설정</li>
                        </ol>
                    </div>
                    <div id="tab-srv-flow" class="tabpanel">
                        <ol>
                            <li>
                                키오스크: <span class="mono">/pay</span> → 웹
                                결제
                            </li>
                            <li>
                                서버: <span class="mono">/success</span> 승인
                                처리
                            </li>
                            <li>
                                키오스크:
                                <span class="mono">/order/add/:id</span> 등록
                            </li>
                        </ol>
                    </div>
                    <div id="tab-srv-troubleshoot" class="tabpanel">
                        <ul>
                            <li>포트 충돌 → 포트 변경/점유 해제</li>
                            <li>키 교체 누락 → Toss 키 값 점검</li>
                            <li>프록시/방화벽 → 로컬 접근 허용</li>
                        </ul>
                    </div>
                </div>
            </section>
        </div>
        <!-- ===================== /SERVER PANE ===================== -->

        <footer>
            <div class="container small">
                <img src="/img/logo.png" alt="WI:SH logo" />WI:SH — Kiosk &
                Server
            </div>

            <div class="container">
                &copy; <span id="yearNow"></span> Team ToyoTech. All rights
                reserved.
            </div>
        </footer>

        <script src="script.js"></script>
    </body>
</html>
